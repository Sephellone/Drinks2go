import{isEscapeKey,isTabKey,isEnterKey}from"./util.js";const selectElement=document.querySelector("#sort"),focusableElment=document.querySelector(".catalog__sort--styled"),pseudoSelect=document.querySelector("#styled-sort"),styledSelectOptionsList=document.querySelector(".styled-select"),unstyledSelectContainer=document.querySelector(".catalog__sort-wrapper--no-js"),styledSelectContainer=document.querySelector(".catalog__sort-wrapper--js"),buttons=styledSelectOptionsList.querySelectorAll(".styled-select__option"),hideUnstyledSelect=()=>{unstyledSelectContainer.classList.add("catalog__sort-wrapper--hidden"),styledSelectContainer.classList.remove("catalog__sort-wrapper--hidden")};function onSelectEscKeydown(e){isEscapeKey(e)&&closeStyledOptionsList()}unstyledSelectContainer.classList.add("catalog__sort-wrapper--hidden"),styledSelectContainer.classList.remove("catalog__sort-wrapper--hidden");const openStyledOptionsList=()=>{styledSelectOptionsList.classList.add("styled-select--open"),styledSelectOptionsList.classList.remove("styled-select--closed"),styledSelectContainer.classList.toggle("catalog__sort-wrapper--open"),document.addEventListener("keydown",onSelectEscKeydown),document.addEventListener("click",onOutsideClick)},closeStyledOptionsList=()=>{styledSelectOptionsList.classList.remove("styled-select--open"),styledSelectOptionsList.classList.add("styled-select--closed"),styledSelectContainer.classList.toggle("catalog__sort-wrapper--open"),document.removeEventListener("keydown",onSelectEscKeydown),document.removeEventListener("click",onOutsideClick)};function onOutsideClick(e){e.target.closest(".styled-select")||e.target===pseudoSelect||closeStyledOptionsList()}const onButtonOptionClick=e=>{buttons.forEach((e=>{e.classList.remove("styled-select__option--selected")})),e.target.classList.add("styled-select__option--selected"),selectElement.value=e.target.name,pseudoSelect.textContent=e.target.textContent,closeStyledOptionsList()};buttons.forEach((e=>{e.addEventListener("click",onButtonOptionClick)}));const onSelectClick=()=>{styledSelectOptionsList.classList.contains("styled-select--closed")?openStyledOptionsList():closeStyledOptionsList()},onFocusElementTab=e=>{isTabKey(e)&&(document.activeElement===focusableElment&&openStyledOptionsList(),styledSelectOptionsList.classList.contains("styled-select--open")&&document.activeElement!==focusableElment&&!document.activeElement.classList.contains("styled-select__option")&&closeStyledOptionsList())};document.addEventListener("keydown",onFocusElementTab);const onPseudoSelectEnterPress=e=>{isEnterKey(e)&&onSelectClick()};pseudoSelect.addEventListener("click",onSelectClick),focusableElment.addEventListener("keydown",onPseudoSelectEnterPress);