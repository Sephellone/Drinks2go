import{isEnterKey}from"./util.js";const MIN_PRICE=0,MAX_PRICE=1e3,submitButton=document.querySelector(".filters__button--submit");submitButton.addEventListener("click",(e=>e.preventDefault()));const sliderContainer=document.querySelector(".range-slider__track"),minHandle=sliderContainer.querySelector(".range-slider__handle--min"),maxHandle=sliderContainer.querySelector(".range-slider__handle--max"),resizableSlider=sliderContainer.querySelector(".range-slider__slider"),minInput=document.querySelector("#min-price"),maxInput=document.querySelector("#max-price"),rangeSliderWidth=sliderContainer.getBoundingClientRect().width,rangeSliderLeft=sliderContainer.getBoundingClientRect().left,rangeSliderRight=sliderContainer.getBoundingClientRect().right,handleWidth=minHandle.offsetWidth,shiftX=handleWidth/2,handleWidthPercent=100*handleWidth/rangeSliderWidth;let target,roundedLeftPercent,leftPercent,roundedRightPercent,rightPercent,resizableSliderChangableLeft=Math.round(100*(resizableSlider.getBoundingClientRect().left-rangeSliderLeft)/rangeSliderWidth),resizableSliderChangableRight=Math.round(100*(rangeSliderRight-resizableSlider.getBoundingClientRect().right)/rangeSliderWidth);const updateResizableSlider=()=>{resizableSlider.setAttribute("style",`left: ${resizableSliderChangableLeft}%; right: ${resizableSliderChangableRight}%`)},onMouseMove=e=>{minHandle.getBoundingClientRect().left;const t=rangeSliderRight-minHandle.getBoundingClientRect().right,n=maxHandle.getBoundingClientRect().left-rangeSliderLeft;maxHandle.getBoundingClientRect().right;if(target===minHandle){let t=e.clientX-shiftX-rangeSliderLeft;t<0&&(t=0),t>n&&(t=n),leftPercent=t/rangeSliderWidth,roundedLeftPercent=Math.round(100*leftPercent),resizableSliderChangableLeft=roundedLeftPercent,minInput.value=Math.round(1e3*leftPercent),minHandle.setAttribute("style",`left: ${roundedLeftPercent}%;`)}if(target===maxHandle){let n=rangeSliderRight-e.clientX-shiftX;n<0&&(n=0),n>t&&(n=t),rightPercent=n/rangeSliderWidth,roundedRightPercent=Math.round(100*rightPercent),resizableSliderChangableRight=roundedRightPercent,maxInput.value=Math.round(1e3-1e3*rightPercent),maxHandle.setAttribute("style",`right: ${roundedRightPercent}%;`)}updateResizableSlider()},onMinInputChange=()=>{let e;minInput.value<0?minInput.value=0:+minInput.value>+maxInput.value?(minInput.value=maxInput.value,e=100*minInput.value/1e3-handleWidthPercent):e=100*minInput.value/1e3,minHandle.setAttribute("style",`left: ${e}%;`),resizableSliderChangableLeft=e,updateResizableSlider()},onMaxInputChange=()=>{let e;+maxInput.value<+minInput.value&&(maxInput.value=minInput.value),e=100*maxInput.value/1e3+handleWidthPercent,maxInput.value>1e3&&(maxInput.value=1e3,e=100*maxInput.value/1e3),maxHandle.setAttribute("style",`right: ${100-e}%;`),resizableSliderChangableRight=100-e,updateResizableSlider()},onMouseUp=()=>{document.removeEventListener("mouseup",onMouseUp),document.removeEventListener("mousemove",onMouseMove)};minInput.value=0,maxInput.value=900,updateResizableSlider(),minHandle.addEventListener("mousedown",(()=>{target=minHandle,document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",onMouseUp)})),maxHandle.addEventListener("mousedown",(()=>{target=maxHandle,document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",onMouseUp)})),minInput.addEventListener("change",onMinInputChange),maxInput.addEventListener("change",onMaxInputChange);